name: Split locales

needs:
  packages:
    - busybox

inputs:
  packagedir:
    description: |
      The package directory to split locales from
    default: ${{targets.destdir}}

pipeline:
  - if: ${{inputs.packagedir}} != ${{targets.contextdir}}
    runs: |
      if [ -d "${{inputs.packagedir}}"/usr/share/locale ]; then
        mkdir -p "${{targets.contextdir}}"/usr/share
        mv "${{inputs.packagedir}}"/usr/share/locale "${{targets.contextdir}}"/usr/share/locale
      fi
