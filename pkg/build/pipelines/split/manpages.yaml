name: Split manpages

needs:
  packages:
    - busybox

inputs:
  packagedir:
    description: |
      The package directory to split manpages from
    default: ${{targets.destdir}}

pipeline:
  - if: ${{inputs.packagedir}} != ${{targets.contextdir}}
    runs: |
      if [ -d "${{inputs.packagedir}}/usr/share/man" ]; then
        mkdir -p "${{targets.contextdir}}/usr/share"
        mv "${{inputs.packagedir}}/usr/share/man" "${{targets.contextdir}}/usr/share"
      fi
